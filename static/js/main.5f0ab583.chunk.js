(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{105:function(e,t){},107:function(e,t){},116:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(48),o=n.n(r),i=(n(58),n(4)),u=n(13),l=(n(59),n(49)),s=n.n(l),f=n(21),m=n.n(f),b=n(14);function d(){var e=Object(u.a)(["\n  border: 1px solid blue;\n  width: 50%;\n  height: 50%;\n"]);return d=function(){return e},e}function h(){var e=Object(u.a)(["\n  display: flex;\n  width: 100%;\n"]);return h=function(){return e},e}function j(){var e=Object(u.a)(["\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return j=function(){return e},e}var O=b.a.div(j()),v=b.a.div(h()),g=b.a.video(d());var p=function(){var e,t,n,r=Object(c.useState)(""),o=Object(i.a)(r,2),u=o[0],l=o[1],f=Object(c.useState)({}),b=Object(i.a)(f,2),d=b[0],h=b[1],j=Object(c.useState)(),p=Object(i.a)(j,2),E=p[0],w=p[1],y=Object(c.useState)(!1),k=Object(i.a)(y,2),S=k[0],x=k[1],C=Object(c.useState)(""),I=Object(i.a)(C,2),D=I[0],R=I[1],U=Object(c.useState)(),A=Object(i.a)(U,2),B=A[0],J=A[1],M=Object(c.useState)(!1),P=Object(i.a)(M,2),W=P[0],T=P[1],$=Object(c.useRef)(),q=Object(c.useRef)(),z=Object(c.useRef)();return Object(c.useEffect)((function(){z.current=s.a.connect("https://signals-server.herokuapp.com"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){w(e),$.current&&($.current.srcObject=e)})),z.current.on("yourID",(function(e){l(e)})),z.current.on("allUsers",(function(e){h(e)})),z.current.on("hey",(function(e){x(!0),R(e.from),J(e.signal)}))}),[]),E&&(e=a.a.createElement(g,{playsInline:!0,muted:!0,ref:$,autoPlay:!0})),W&&(t=a.a.createElement(g,{playsInline:!0,ref:q,autoPlay:!0})),S&&(n=a.a.createElement("div",null,a.a.createElement("h1",null,D," is calling you"),a.a.createElement("button",{onClick:function(){T(!0);var e=new m.a({initiator:!1,trickle:!1,stream:E});e.on("signal",(function(e){z.current.emit("acceptCall",{signal:e,to:D})})),e.on("stream",(function(e){q.current.srcObject=e})),e.signal(B)}},"Accept"))),a.a.createElement(O,null,a.a.createElement(v,null,e,t),a.a.createElement(v,null,Object.keys(d).map((function(e){return e===u?null:a.a.createElement("button",{onClick:function(){return function(e){var t=new m.a({initiator:!0,trickle:!1,stream:E});t.on("signal",(function(t){z.current.emit("callUser",{userToCall:e,signalData:t,from:u})})),t.on("stream",(function(e){q.current&&(q.current.srcObject=e)})),z.current.on("callAccepted",(function(e){T(!0),t.signal(e)}))}(e)}},"Call ",e)}))),a.a.createElement(v,null,n))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},53:function(e,t,n){e.exports=n(116)},58:function(e,t,n){},59:function(e,t,n){},89:function(e,t){}},[[53,1,2]]]);
//# sourceMappingURL=main.5f0ab583.chunk.js.map